# [26차시] LLM API와 프롬프트 작성법 - 강사 스크립트

## 수업 개요

| 항목 | 내용 |
|------|------|
| 차시 | 26차시 |
| 주제 | LLM API와 프롬프트 작성법 |
| 시간 | 30분 (이론 15분 + 실습 13분 + 정리 2분) |
| 학습 목표 | OpenAI/Claude API 사용, 프롬프트 엔지니어링, 제조업 활용 |

---

## 학습 목표

1. OpenAI/Claude API 사용법을 익힌다
2. 프롬프트 엔지니어링 기초를 이해한다
3. 제조업 활용 사례를 실습한다

---

## 시간 배분

| 구간 | 시간 | 내용 |
|------|------|------|
| 도입 | 2분 | 복습 및 학습목표 |
| 대주제 1 | 5분 | LLM과 API 소개 |
| 대주제 2 | 6분 | 프롬프트 엔지니어링 |
| 대주제 3 | 4분 | 제조업 활용 사례 |
| 실습 | 11분 | LLM API 실습 |
| 정리 | 2분 | 요약 및 다음 차시 예고 |

---

## 상세 스크립트

### 도입부 (2분)

#### 슬라이드 1-3: 복습

> "지난 시간에 REST API와 requests 라이브러리를 배웠습니다. JSON으로 데이터를 주고받는 방법도 익혔죠."

> "오늘은 그 지식을 바탕으로 LLM API를 사용해봅니다. ChatGPT나 Claude 같은 AI를 프로그램에서 호출하는 거예요."

> "제조업에서 LLM을 어떻게 활용할 수 있는지도 살펴봅니다."

---

### 대주제 1: LLM과 API 소개 (5분)

#### 슬라이드 4-6: LLM이란

> "LLM은 Large Language Model, 대규모 언어 모델입니다. 엄청난 양의 텍스트로 학습해서 자연어를 이해하고 생성할 수 있어요."

> "ChatGPT가 대표적이죠. 질문하면 답변하고, 요약하고, 번역하고, 코드도 작성합니다."

> "제조업에서는 불량 원인 분석, 보고서 작성, 매뉴얼 요약 등에 활용할 수 있습니다."

---

#### 슬라이드 7-9: API 키 발급

> "LLM을 사용하려면 먼저 API 키를 발급받아야 합니다."

> "OpenAI는 platform.openai.com에서, Claude는 console.anthropic.com에서 발급받을 수 있어요."

> "중요한 건 API 키 관리입니다. 절대 코드에 직접 넣지 마세요. 환경 변수를 사용하세요."

```python
import os
api_key = os.environ.get('OPENAI_API_KEY')
```

---

#### 슬라이드 10-12: API 기본 구조

> "OpenAI API 호출은 이렇게 합니다."

```python
from openai import OpenAI
client = OpenAI()

response = client.chat.completions.create(
    model="gpt-4",
    messages=[
        {"role": "system", "content": "당신은 제조 전문가입니다."},
        {"role": "user", "content": "온도 이상 원인 분석해주세요."}
    ]
)
```

> "messages에 대화 내용을 넣습니다. system은 AI 역할, user는 사용자 질문이에요."

---

### 대주제 2: 프롬프트 엔지니어링 (6분)

#### 슬라이드 13-15: 프롬프트란

> "프롬프트는 AI에게 보내는 질문이나 지시입니다. 어떻게 물어보느냐에 따라 답변 품질이 크게 달라져요."

> "프롬프트 엔지니어링은 원하는 답변을 얻기 위해 질문을 잘 작성하는 기술입니다."

> "나쁜 예: '불량 분석해줘'. 좋은 예: '온도 250도, 압력 70kPa 조건에서 발생한 표면 스크래치의 원인 3가지와 해결책을 설명해주세요.'"

---

#### 슬라이드 16-18: 프롬프트 기법

> "효과적인 프롬프트 기법을 소개합니다."

> "첫째, **역할 지정**. '당신은 20년 경력의 품질 관리 전문가입니다'처럼 AI의 역할을 정해주세요."

> "둘째, **맥락 제공**. 상황, 데이터, 배경 정보를 충분히 주세요."

> "셋째, **형식 지정**. 원하는 답변 형태를 명시하세요. '3가지로 정리해주세요', 'JSON으로 반환해주세요' 이런 식으로요."

---

#### 슬라이드 19-21: 고급 기법

> "Few-shot 학습은 예시를 보여주는 거예요. '입력: 온도 210도 → 출력: 정상' 이런 예시를 2-3개 주고 나서 진짜 질문을 하면 형식에 맞게 답해줍니다."

> "Chain of Thought는 단계적으로 생각하게 하는 거예요. '단계 1: 데이터 확인, 단계 2: 패턴 분석...' 이렇게 나누면 복잡한 문제도 잘 풀어요."

---

### 대주제 3: 제조업 활용 사례 (4분)

#### 슬라이드 22-24: 활용 사례

> "제조업에서 LLM을 활용하는 사례를 봅시다."

> "첫째, **불량 원인 분석**. 센서 데이터와 불량 유형을 주면 가능한 원인과 해결책을 제시합니다."

> "둘째, **보고서 자동 생성**. 데이터를 주면 품질 보고서 형식으로 정리해줍니다."

> "셋째, **이상 탐지 해석**. ML 모델이 이상을 감지하면 LLM이 현장 작업자가 이해할 수 있게 설명해줍니다."

---

#### 슬라이드 25-27: 하이브리드 접근

> "가장 강력한 방법은 ML 모델과 LLM을 조합하는 겁니다."

> "ML 모델이 예측하고, LLM이 해석합니다. 'ML 모델이 불량 확률 85%라고 예측했는데, 이유는 온도가 기준치를 초과했기 때문입니다' 이런 식으로요."

> "주의할 점도 있어요. LLM은 가끔 사실이 아닌 내용을 만들어냅니다. 환각이라고 하죠. 중요한 결정에는 반드시 검증하세요."

---

### 실습편 (11분)

#### 슬라이드 28-30: 환경 설정

```python
# API 키 설정 (환경 변수 권장)
import os
os.environ['OPENAI_API_KEY'] = 'your-key-here'  # 실제로는 환경 변수 사용

# 라이브러리 설치
# pip install openai anthropic
```

---

#### 슬라이드 31-33: 기본 호출

```python
from openai import OpenAI

client = OpenAI()

response = client.chat.completions.create(
    model="gpt-3.5-turbo",  # 비용 절약
    messages=[
        {"role": "system", "content": "당신은 제조업 품질 전문가입니다."},
        {"role": "user", "content": "온도가 250도로 높은데 원인이 뭘까요?"}
    ],
    temperature=0.3  # 분석 작업은 낮은 temperature
)

print(response.choices[0].message.content)
```

---

#### 슬라이드 34-36: 구조화된 프롬프트

```python
def analyze_quality_issue(sensor_data, issue_description):
    prompt = f"""
    [제조 공정 품질 분석 요청]

    문제 상황: {issue_description}

    센서 데이터:
    - 온도: {sensor_data['temperature']}도
    - 압력: {sensor_data['pressure']}kPa
    - 속도: {sensor_data['speed']}rpm

    다음 형식으로 분석해주세요:
    1. 가능한 원인 (3가지)
    2. 각 원인의 해결 방법
    3. 예방을 위한 권장 사항
    """
    # API 호출
    return call_llm(prompt)
```

---

#### 슬라이드 37-39: JSON 출력 요청

```python
def get_structured_analysis(data):
    prompt = f"""
    센서 데이터를 분석하고 JSON으로 반환해주세요.

    데이터: {data}

    반환 형식:
    {{
        "status": "normal/warning/critical",
        "risk_score": 0-100,
        "anomalies": ["이상 항목"],
        "recommendations": ["권장 조치"]
    }}

    JSON만 출력하고 다른 텍스트는 포함하지 마세요.
    """
    return call_llm(prompt)
```

---

### 정리 (2분)

#### 슬라이드 40-41: 핵심 정리

> "오늘 배운 내용을 정리합니다."

> "**LLM API**는 자연어를 이해하고 생성하는 AI를 호출하는 방법입니다. OpenAI, Claude 등이 있어요."

> "**프롬프트 엔지니어링**은 원하는 답변을 얻기 위한 질문 작성 기술입니다. 역할 지정, 맥락 제공, 형식 지정이 핵심이에요."

> "**제조업 활용**은 불량 분석, 보고서 생성, 이상 해석 등에 LLM을 적용하는 겁니다. ML 모델과 조합하면 더 강력합니다."

---

#### 슬라이드 42-43: 다음 차시 예고

> "다음 시간에는 Streamlit으로 웹앱을 만듭니다. 지금까지 만든 ML 모델과 LLM을 웹에서 사용할 수 있게 하는 거예요."

> "오늘 수업 마무리합니다. 수고하셨습니다!"

---

## 예상 질문 및 답변

### Q1: API 비용이 많이 드나요?

> "모델에 따라 다릅니다. GPT-3.5는 저렴하고, GPT-4는 비싸요. 처음에는 저렴한 모델로 테스트하고, 필요할 때만 고급 모델을 쓰세요."

### Q2: LLM이 틀린 답변을 하면 어떡하나요?

> "환각이라고 합니다. 중요한 결정에는 반드시 사람이 검증하세요. temperature를 낮추면 좀 더 정확해집니다."

### Q3: 회사 데이터를 API로 보내도 되나요?

> "보안 정책을 확인하세요. 민감한 데이터는 익명화하거나, 자체 호스팅 모델(Llama 등)을 고려하세요."

### Q4: Claude와 GPT 중 어떤 게 좋나요?

> "용도에 따라 다릅니다. 긴 문서 처리는 Claude가, 범용적인 작업은 GPT가 강점이 있어요. 직접 테스트해보세요."

---

## 참고 자료

### 공식 문서
- [OpenAI API](https://platform.openai.com/docs)
- [Anthropic Claude API](https://docs.anthropic.com/)
- [프롬프트 엔지니어링 가이드](https://platform.openai.com/docs/guides/prompt-engineering)

### 관련 차시
- 24차시: AI API의 이해와 활용
- 26차시: Streamlit으로 웹앱 만들기

---

## 체크리스트

수업 전:
- [ ] API 키 발급 (데모용)
- [ ] 라이브러리 설치 확인
- [ ] 예제 프롬프트 준비

수업 중:
- [ ] 환경 변수 중요성 강조
- [ ] 프롬프트 기법 시연
- [ ] 환각 주의 언급

수업 후:
- [ ] 실습 코드 배포
- [ ] API 키 보안 안내

