# 번외E: 특성 공학 기초 실습 - 강사 스크립트

## 개요
- **총 시간**: 30분
- **구성**: 이론 10분 + 실습 20분
- **난이도**: 초급~중급
- **데이터셋**: Tips (seaborn 내장)

---

## Part 1: 특성 공학 개념 (4분)

### 슬라이드 1-4: 도입 (2분)

> "오늘은 '좋은 특성이 좋은 모델을 만든다'는 원리를 배웁니다."

> "복잡한 모델을 쓰는 것보다 **좋은 특성을 만드는 것**이 더 효과적일 때가 많습니다."

> "이것을 특성 공학, Feature Engineering이라고 합니다."

### 슬라이드 5-6: 좋은 특성의 조건 (2분)

> "좋은 특성의 3가지 조건이 있습니다."

> "첫째, 정보성. 타겟과 관련이 있어야 합니다."
> "둘째, 독립성. 다른 특성과 너무 중복되면 안 됩니다."
> "셋째, 이해 가능. 해석할 수 있어야 비즈니스에 적용할 수 있습니다."

---

## Part 2: 수치형 특성 변환 (7분)

### 슬라이드 7-10: 로그 변환 (3분)

> "금액 데이터는 보통 오른쪽으로 치우쳐 있습니다. 큰 값이 드물게 있죠."

> "이런 분포를 정규분포에 가깝게 만들려면 로그 변환을 사용합니다."

```python
df['log_total_bill'] = np.log1p(df['total_bill'])
```

> "log1p를 쓰는 이유는 log(0)이 무한대가 되는 것을 방지하기 위해서입니다."

### 슬라이드 11-13: 비율 및 구간화 (4분)

> "팁 금액 자체보다 **팁 비율**이 더 의미있을 수 있습니다."

```python
df['tip_ratio'] = df['tip'] / df['total_bill']
```

> "1인당 금액도 유용한 특성입니다. 총 금액을 인원수로 나누면 됩니다."

> "구간화는 연속형 값을 범주로 바꾸는 것입니다. Low, Medium, High처럼요."

---

## Part 3: 범주형 인코딩 (6분)

### 슬라이드 14-17: 빈도/타겟 인코딩 (6분)

> "One-Hot 인코딩은 범주가 많으면 컬럼이 너무 많아집니다."

> "대안으로 빈도 인코딩이 있습니다. 범주를 출현 빈도로 대체합니다."

```python
day_freq = df['day'].value_counts(normalize=True)
df['day_freq'] = df['day'].map(day_freq)
```

> "타겟 인코딩은 범주를 타겟의 평균으로 대체합니다."

> "주의! 테스트 데이터의 정보가 학습에 사용되면 안 됩니다. 데이터 누출이라고 합니다."

---

## Part 4: 날짜/시간 특성 (5분)

### 슬라이드 18-22: 시간 특성 추출 (5분)

> "날짜가 있으면 다양한 특성을 추출할 수 있습니다."

> "연도, 월, 요일, 시간, 주말 여부 등등."

```python
df['is_weekend'] = df['day'].isin(['Sat', 'Sun']).astype(int)
```

> "12월과 1월은 숫자로는 멀지만 실제로는 가깝습니다. 이런 경우 삼각함수를 사용합니다."

---

## Part 5: 특성 선택 (5분)

### 슬라이드 23-27: 상관관계 기반 선택 (5분)

> "특성이 너무 많으면 과적합 위험이 있습니다."

> "상관관계를 확인해서 타겟과 관련 없는 특성은 제거합니다."

```python
correlations = df.corr()['tip'].abs().sort_values(ascending=False)
```

> "또한 특성끼리 상관관계가 높으면 다중공선성 문제가 생깁니다. 하나만 남깁니다."

---

## Part 6: 성능 비교 (3분)

### 슬라이드 28-32: 전후 비교 (3분)

> "가장 중요한 것은 특성 공학이 실제로 성능을 올리는지 확인하는 것입니다."

> "기본 특성과 공학 후 특성으로 각각 모델을 만들어 비교합니다."

> "결과를 보면 RMSE가 1.02에서 0.98로 개선됐습니다. 4% 정도 개선이죠."

---

## 실습 안내 (10분)

> "이제 직접 해봅시다. code.py를 열고 실습을 진행합니다."

### 실습 체크포인트

1. 데이터 로드 및 확인 (2분)
2. 로그 변환, 비율 계산 (3분)
3. 빈도 인코딩 적용 (2분)
4. 상관관계 확인 (2분)
5. 성능 비교 (1분)

---

## 마무리

> "특성 공학은 경험이 많이 필요한 분야입니다."

> "어떤 특성이 좋을지는 도메인 지식과 실험이 필요합니다."

> "다음 번외 F에서는 이 과정을 sklearn Pipeline으로 자동화하는 방법을 배웁니다."

---

## 예상 Q&A

**Q1**: "모든 수치형 특성에 로그 변환을 해야 하나요?"
**A1**: "아닙니다. 분포가 치우친 경우에만 적용합니다. 이미 정규분포면 불필요합니다."

**Q2**: "타겟 인코딩이 One-Hot보다 항상 좋나요?"
**A2**: "상황에 따라 다릅니다. 범주가 적으면 One-Hot이 안전하고, 많으면 타겟 인코딩을 고려합니다."

**Q3**: "상관관계 몇 이상이면 선택하나요?"
**A3**: "절대적 기준은 없습니다. 보통 0.1~0.3 이상을 기준으로 하고, 실험으로 확인합니다."

**Q4**: "특성을 많이 만들면 무조건 좋나요?"
**A4**: "아닙니다. 특성이 많으면 과적합 위험이 있습니다. 선택이 중요합니다."
