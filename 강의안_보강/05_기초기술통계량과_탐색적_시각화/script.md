# [5차시] 기초 기술통계량과 탐색적 시각화 - 강사 스크립트

## 차시 정보
- **차시**: 5차시
- **제목**: 기초 기술통계량과 탐색적 시각화
- **시간**: 30분 (이론 15분 + 실습 15분)
- **대주제**: 1. 대표값의 의미 / 2. 데이터의 퍼짐 정도 / 3. 제조 품질 측정값의 탐색적 시각화

---

## 도입부 (2분)

### 인사 및 수업 소개

> 안녕하세요. 5차시 '기초 기술통계량과 탐색적 시각화' 수업을 시작하겠습니다.
>
> 지난 시간에 데이터를 어디서 어떻게 확보하는지 배웠죠. 오늘은 확보한 데이터를 **숫자와 그래프**로 이해하는 방법을 배웁니다.
>
> 제조 현장에서 "이번 달 평균 불량률이 3%입니다"라고 하면, 이 숫자가 좋은 건지 나쁜 건지 어떻게 판단할까요? 평균만으로 충분할까요?
>
> 오늘 배우는 기술통계와 시각화를 알면, 데이터가 말하는 것을 정확히 읽을 수 있습니다.

### 학습목표 제시

> 오늘 수업을 마치면 여러분은:
> - 첫째, 평균, 중앙값, 표준편차 등 데이터 요약 수치의 의미를 이해하게 됩니다.
> - 둘째, Matplotlib으로 기본 그래프를 그릴 수 있습니다.
> - 셋째, 히스토그램, 상자그림, 산점도를 해석할 수 있습니다.

### 진행 순서 안내

> 오늘 수업은 이론 15분, 실습 15분입니다.
>
> 이론에서는 세 가지 대주제를 다룹니다:
> 1. 대표값의 의미 - 5분
> 2. 데이터의 퍼짐 정도 - 5분
> 3. 제조 품질 측정값의 탐색적 시각화 - 5분

---

## 대주제 1: 대표값의 의미 (5분)

### 1.1 왜 대표값이 필요한가

> 생산라인에서 온도 데이터를 하루에 몇 개나 수집할까요? 분 단위로 측정하면 1,440개, 초 단위면 86,400개입니다.
>
> 이 많은 숫자를 다 볼 수 없잖아요. 그래서 **"오늘 평균 온도 85도"**처럼 하나의 숫자로 요약합니다.
>
> 이렇게 데이터 전체를 대표하는 숫자를 **대표값** 또는 **중심 경향치**라고 합니다.
>
> 대표적인 대표값 세 가지가 있습니다: **평균, 중앙값, 최빈값**

### 1.2 평균 (Mean)

> 평균은 가장 친숙한 대표값이죠.
>
> **모든 값을 더해서 개수로 나눈 값**입니다.
>
> 예를 들어 [85, 86, 84, 87]의 평균은 (85+86+84+87) ÷ 4 = 85.5입니다.
>
> Python에서는 `np.mean(data)` 또는 `df.mean()`으로 계산합니다.
>
> 평균의 문제점이 뭘까요? **이상치에 민감**합니다.
>
> [85, 86, 84, 200] 이렇게 하나가 이상하면? 평균이 113.75로 껑충 뜁니다. 실제 온도는 85도 근처인데 평균이 114도라고 나오면 혼란스럽죠.

### 1.3 중앙값 (Median)

> 그래서 **중앙값**이 필요합니다.
>
> 중앙값은 데이터를 **크기 순으로 정렬**했을 때 **가운데**에 있는 값입니다.
>
> [84, 85, 86, 200]을 정렬하면 그대로고, 가운데 두 개 85와 86의 평균인 85.5가 중앙값입니다.
>
> 아까 평균은 113.75였는데, 중앙값은 85.5입니다. 훨씬 현실적이죠?
>
> 중앙값은 **이상치에 강건**합니다. 영어로 robust하다고 해요.
>
> 소득 통계, 집값 통계에서 평균 대신 중앙값을 쓰는 이유가 이겁니다. 소수의 부자가 평균을 왜곡하거든요.

### 1.4 최빈값 (Mode)

> 최빈값은 **가장 자주 나타나는 값**입니다.
>
> [A, B, A, C, A, B]에서 A가 3번으로 가장 많으니까 최빈값은 A입니다.
>
> 최빈값은 **범주형 데이터**에서 주로 씁니다.
> - "가장 많이 발생하는 불량 유형은?"
> - "가장 많이 생산하는 제품은?"
>
> 연속형 숫자 데이터에서는 모든 값이 다 다를 수 있어서 잘 안 씁니다.

### 1.5 세 대표값의 관계

> 세 대표값이 같을 수도 있고 다를 수도 있습니다.
>
> **정규분포**(종 모양 분포)에서는 평균 = 중앙값 = 최빈값, 셋이 거의 같습니다.
>
> 하지만 분포가 **한쪽으로 치우치면** 세 값이 달라집니다.
> - 오른쪽으로 꼬리가 길면: 평균 > 중앙값 > 최빈값
> - 왼쪽으로 꼬리가 길면: 최빈값 > 중앙값 > 평균
>
> 그래서 평균과 중앙값을 비교하면 분포 형태를 짐작할 수 있어요. 차이가 크면 이상치가 있거나 비대칭 분포입니다.

---

## 대주제 2: 데이터의 퍼짐 정도 (5분)

### 2.1 산포도란

> 대표값만으로는 부족합니다. 왜냐하면:
>
> 라인 A: [84, 85, 86, 87] → 평균 85.5
> 라인 B: [70, 80, 91, 101] → 평균 85.5
>
> 평균이 똑같은데, 두 라인의 품질 관리 상태는 완전히 다르죠?
>
> A는 안정적이고, B는 들쭉날쭉합니다.
>
> 이렇게 **데이터가 얼마나 흩어져 있는지**를 나타내는 지표를 **산포도** 또는 **퍼짐**이라고 합니다.

### 2.2 범위 (Range)

> 가장 간단한 산포도는 **범위**입니다.
>
> 범위 = 최대값 - 최소값
>
> 라인 A: 87 - 84 = 3
> 라인 B: 101 - 70 = 31
>
> B가 훨씬 넓게 퍼져 있죠?
>
> 범위는 계산이 쉽지만, 극단값 두 개만 보기 때문에 **이상치에 매우 민감**합니다. 하나만 튀어도 범위가 확 커집니다.

### 2.3 분산과 표준편차

> 더 정교한 지표가 **분산**과 **표준편차**입니다.
>
> 분산은 각 값이 평균에서 얼마나 떨어져 있는지의 **제곱 평균**입니다.
>
> 계산 과정을 간단히 보면:
> 1. 평균 계산
> 2. 각 값에서 평균을 뺀다 (편차)
> 3. 편차를 제곱한다 (부호 없애기)
> 4. 제곱한 값들의 평균
>
> 그런데 분산은 단위가 제곱이에요. 온도면 °C²가 됩니다. 직관적이지 않죠.
>
> 그래서 분산에 제곱근을 씌운 게 **표준편차**입니다. 단위가 원래대로 °C가 됩니다.
>
> Python에서는 `np.std(data, ddof=1)`로 계산합니다. ddof=1은 표본 표준편차를 의미합니다.

### 2.4 표준편차의 의미

> 표준편차가 의미하는 건 **"평균에서 대략 이 정도 떨어져 있다"**입니다.
>
> 평균 85도, 표준편차 3도라면:
> - 대부분의 값이 85 ± 3, 즉 82~88도 사이에 있다는 뜻입니다.
>
> 정규분포에서는 유명한 **68-95-99.7 규칙**이 있어요:
> - 68%가 평균 ± 1σ 안에
> - 95%가 평균 ± 2σ 안에
> - 99.7%가 평균 ± 3σ 안에
>
> 제조업 품질 관리에서 ±3σ 규칙을 많이 씁니다. 3σ 밖이면 거의 확실하게 이상입니다.

### 2.5 사분위수와 IQR

> 이상치에 강건한 산포도 지표도 있습니다. **IQR**입니다.
>
> 먼저 **사분위수**를 알아야 해요:
> - Q1: 하위 25% 위치의 값
> - Q2: 50% (= 중앙값)
> - Q3: 상위 25% 위치의 값
>
> **IQR = Q3 - Q1**, 중간 50% 데이터의 범위입니다.
>
> 이상치 탐지에 많이 쓰입니다:
> - Q1 - 1.5×IQR 미만 → 이상치
> - Q3 + 1.5×IQR 초과 → 이상치
>
> 이 기준은 나중에 상자그림에서 다시 나옵니다.

---

## 대주제 3: 제조 품질 측정값의 탐색적 시각화 (5분)

### 3.1 탐색적 데이터 분석 (EDA)

> 숫자만 보면 감이 잘 안 옵니다. **그래프**로 보면 훨씬 직관적이에요.
>
> 데이터를 시각화하고 통계량을 확인해서 **패턴, 이상치, 관계**를 파악하는 과정을 **탐색적 데이터 분석(EDA)**이라고 합니다.
>
> EDA의 핵심 시각화 도구 세 가지:
> - **히스토그램**: 분포 확인
> - **상자그림**: 이상치, 사분위수
> - **산점도**: 두 변수 간 관계

### 3.2 히스토그램

> **히스토그램**은 데이터를 구간으로 나누고 각 구간에 몇 개가 있는지 막대로 보여줍니다.
>
> x축은 값의 범위, y축은 빈도(개수)입니다.
>
> 히스토그램을 보면:
> - 데이터가 어디에 **몰려** 있는지
> - 얼마나 **넓게** 퍼져 있는지
> - **대칭**인지 비대칭인지
> - **이상치**가 있는지
>
> 한눈에 알 수 있습니다.
>
> Python에서는 `plt.hist(data, bins=20)`으로 그립니다. bins는 구간 개수입니다.

### 3.3 상자그림

> **상자그림(Box Plot)**은 사분위수와 이상치를 한눈에 보여줍니다.
>
> 상자의 아래 선이 Q1, 가운데 선이 중앙값, 위 선이 Q3입니다.
>
> 상자에서 뻗어나간 선(수염)은 이상치가 아닌 범위의 최대/최소입니다.
>
> 수염 바깥의 점들이 **이상치**입니다.
>
> 상자그림은 **여러 그룹을 비교**할 때 특히 좋습니다.
> - 라인별 온도 비교
> - 요일별 불량률 비교
>
> Python에서는 `plt.boxplot([data1, data2, data3])`로 그립니다.

### 3.4 산점도

> **산점도(Scatter Plot)**는 두 변수의 관계를 점으로 보여줍니다.
>
> x축에 한 변수, y축에 다른 변수를 놓고, 각 데이터를 점으로 찍습니다.
>
> 점들의 패턴을 보면:
> - **양의 상관**: 오른쪽 위로 올라가는 패턴 (X 증가 → Y 증가)
> - **음의 상관**: 오른쪽 아래로 내려가는 패턴 (X 증가 → Y 감소)
> - **상관 없음**: 흩어진 패턴
>
> "온도가 올라가면 불량률도 올라가나요?" 이런 질문에 산점도가 답을 줍니다.
>
> Python에서는 `plt.scatter(x, y)`로 그립니다.

### 3.5 시각화의 중요성

> 같은 평균, 같은 표준편차를 가진 데이터도 **분포는 완전히 다를 수 있습니다**.
>
> 유명한 **앤스콤 콰르텟(Anscombe's Quartet)** 예시가 있어요. 네 개의 데이터셋이 평균, 분산, 상관계수가 다 똑같은데 그래프로 보면 완전히 다릅니다.
>
> 그래서 **숫자만 보지 말고 반드시 시각화**해야 합니다.
>
> describe()로 통계량 확인하고, 히스토그램과 상자그림으로 눈으로 확인하세요.

---

## 실습편 (15분)

### 실습 개요

> 이제 실습으로 직접 해봅시다.
>
> 1. 대표값 계산: 평균, 중앙값, 최빈값
> 2. 산포도 계산: 범위, 표준편차, IQR
> 3. 시각화: 히스토그램, 상자그림, 산점도
>
> Jupyter Notebook을 열어주세요.

### 실습 1: 대표값 계산

> 먼저 가상의 온도 데이터를 만들고 대표값을 계산합니다.
>
> ```python
> import numpy as np
> import pandas as pd
>
> np.random.seed(42)
> temps = np.random.normal(85, 3, 100)  # 평균 85, 표준편차 3
> temps[95:100] = [110, 115, 120, 50, 45]  # 이상치 추가
>
> print(f"평균: {np.mean(temps):.2f}")
> print(f"중앙값: {np.median(temps):.2f}")
> ```
>
> 평균과 중앙값의 차이를 보세요. 이상치 때문에 차이가 나죠?

### 실습 2: 산포도 계산

> 이번엔 산포도를 계산합니다.
>
> ```python
> print(f"범위: {np.max(temps) - np.min(temps):.2f}")
> print(f"표준편차: {np.std(temps, ddof=1):.2f}")
>
> Q1 = np.percentile(temps, 25)
> Q3 = np.percentile(temps, 75)
> IQR = Q3 - Q1
> print(f"IQR: {IQR:.2f}")
> ```
>
> 이상치 기준도 계산해보세요:
> - 하한: Q1 - 1.5×IQR
> - 상한: Q3 + 1.5×IQR

### 실습 3: 히스토그램

> 히스토그램으로 분포를 확인합니다.
>
> ```python
> import matplotlib.pyplot as plt
>
> plt.hist(temps, bins=30, edgecolor='black')
> plt.axvline(np.mean(temps), color='red', label='평균')
> plt.axvline(np.median(temps), color='green', linestyle='--', label='중앙값')
> plt.legend()
> plt.show()
> ```
>
> 빨간 선(평균)과 초록 선(중앙값)의 위치 차이를 보세요. 이상치 때문에 평균이 밀려났습니다.

### 실습 4: 상자그림

> 여러 라인을 비교하는 상자그림을 그립니다.
>
> ```python
> line_a = np.random.normal(85, 2, 50)
> line_b = np.random.normal(86, 4, 50)
> line_c = np.random.normal(84, 6, 50)
>
> plt.boxplot([line_a, line_b, line_c], labels=['A', 'B', 'C'])
> plt.title('라인별 온도 비교')
> plt.show()
> ```
>
> 상자의 크기(IQR)와 이상치 점을 비교해보세요. C 라인이 가장 불안정합니다.

### 실습 5: 산점도

> 온도와 불량률의 관계를 산점도로 봅니다.
>
> ```python
> temperature = np.random.normal(85, 5, 100)
> defect_rate = 0.3 * temperature + np.random.normal(0, 3, 100)
>
> plt.scatter(temperature, defect_rate)
> plt.xlabel('온도')
> plt.ylabel('불량률')
> plt.show()
> ```
>
> 오른쪽 위로 올라가는 패턴이 보이면 양의 상관관계입니다.

---

## 마무리 (2분)

### 핵심 요약

> 오늘 배운 핵심:
>
> **1. 대표값의 의미**
> - 평균: 모든 값의 중심, 이상치에 민감
> - 중앙값: 정렬 후 중간값, 이상치에 강건
> - 최빈값: 가장 자주 나오는 값
>
> **2. 데이터의 퍼짐 정도**
> - 범위: 최대 - 최소
> - 표준편차: 평균에서의 평균적 거리
> - IQR: Q3 - Q1, 이상치 탐지에 활용
>
> **3. 탐색적 시각화**
> - 히스토그램: 분포 형태
> - 상자그림: 사분위수, 이상치
> - 산점도: 두 변수 간 관계

### 다음 차시 예고

> 다음 시간에는 **6차시: 확률분포와 품질 검정**을 배웁니다.
>
> - 정규분포와 Z-score
> - 가설검정의 기초
> - t-검정으로 라인별 품질 비교
>
> 오늘 배운 평균, 표준편차를 바탕으로 데이터 분석을 한 단계 더 깊이 들어갑니다.

### 마무리 인사

> 5차시 수업 마치겠습니다.
>
> describe() 함수 하나로 오늘 배운 모든 통계량을 한 번에 볼 수 있습니다. 데이터를 받으면 먼저 describe()와 히스토그램으로 전체 그림을 파악하세요.
>
> 수고하셨습니다!

---

## 예상 질문 및 답변

### Q1. 언제 평균을 쓰고 언제 중앙값을 쓰나요?

> 일반적으로는 평균을 씁니다. 하지만:
> - 이상치가 있을 때 → 중앙값
> - 분포가 비대칭일 때 → 중앙값
> - 소득, 집값 등 극단값이 있는 데이터 → 중앙값
>
> 제조 현장에서는 둘 다 계산해서 비교하세요. 차이가 크면 이상치를 의심합니다.

### Q2. ddof=1은 왜 쓰나요?

> ddof는 "delta degrees of freedom"의 약자입니다.
>
> - ddof=0: 모집단 표준편차 (N으로 나눔)
> - ddof=1: 표본 표준편차 (N-1로 나눔)
>
> 우리가 다루는 데이터는 보통 모집단의 일부(표본)이므로 ddof=1을 씁니다.
>
> pandas의 std()는 기본이 ddof=1이고, numpy의 std()는 기본이 ddof=0입니다. 주의하세요.

### Q3. 히스토그램의 bins는 몇 개가 적당한가요?

> 정해진 규칙은 없지만 일반적인 가이드:
> - 데이터가 적을 때 (< 50): 5~10개
> - 데이터가 중간 (50~200): 10~20개
> - 데이터가 많을 때 (> 200): 20~50개
>
> 또는 **스터지스 공식**: bins ≈ 1 + 3.322 × log₁₀(n)
>
> 가장 좋은 방법은 여러 값을 시도해보고 분포가 잘 보이는 걸 선택하는 것입니다.

### Q4. 상자그림에서 이상치 기준 1.5는 어디서 나온 건가요?

> 1.5는 경험적으로 정해진 값입니다. 존 튜키(John Tukey)가 제안했습니다.
>
> - 1.5 × IQR: 일반적인 이상치 (mild outlier)
> - 3.0 × IQR: 극단적 이상치 (extreme outlier)
>
> 정규분포에서 1.5 × IQR은 대략 상위/하위 0.7%를 잡아냅니다.
>
> 도메인에 따라 기준을 조정할 수 있습니다.

### Q5. 상관관계가 있다고 인과관계가 있는 건가요?

> 아닙니다! 매우 중요한 구분입니다.
>
> **상관관계**: X와 Y가 함께 변한다
> **인과관계**: X가 Y를 일으킨다
>
> 예: 아이스크림 판매량과 익사 사고가 양의 상관
> → 아이스크림이 익사를 일으키나요? 아니요!
> → 둘 다 "더운 날씨"라는 공통 원인 때문
>
> 상관관계만 보고 인과관계를 단정하면 안 됩니다. 인과관계를 증명하려면 실험이나 추가 분석이 필요합니다.
